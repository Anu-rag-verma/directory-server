<project default="java:compile"
    xmlns:j="jelly:core"
    xmlns:u="jelly:util"
    xmlns:ant="jelly:ant"
    xmlns:maven="jelly:maven"
    xmlns:m="maven"
    xmlns:deploy="deploy">
    
    <preGoal name="site">
        <attainGoal name="docbook:transform"/>
    </preGoal>

    <postGoal name="site">
        <attainGoal name="server:copy-images"/>
    </postGoal>

    <goal name="server:copy-images">
        <copy toDir="target/docs/images">
            <fileSet dir="${basedir}/src/images">
                <include name="*.gif"/>
            </fileSet>
        </copy>
    </goal>
    
    <goal name="cleanall">
    	<attainGoal name="clean"/>
    	<delete dir="home"/>
    </goal>

    <goal 
		name="build-all"
		description="Build All Jar Files And Intall">
	    
		<maven:reactor
			basedir="${basedir}"
		    postProcessing="true"
		    includes="*/project.xml"
		    goals="jar:install"
		    banner="Building All"
		    ignoreFailures="false"/>
    </goal>

    <goal 
		name="clean-all"
		description="Clean all sandbox projects">
	    
		<maven:reactor
			basedir="${basedir}"
		    postProcessing="true"
		    includes="*/project.xml"
		    goals="clean"
		    banner="Clean All"
		    ignoreFailures="true"/>
    </goal>

    <goal 
		name="eclipse-all"
		description="Generate eclipse descriptors for all projects">
	    
		<maven:reactor
			basedir="${basedir}"
		    postProcessing="true"
		    includes="*/project.xml"
		    goals="clean"
		    banner="Clean All"
		    ignoreFailures="true"/>
    </goal>

    <postGoal name="java:compile">
    	<attainGoal name="avalon:meta"/>
    </postGoal>
    
    <postGoal name="aspectj:compile">
    	<attainGoal name="avalon:meta"/>
    </postGoal>
    
    <goal 
		name="eclipse-all"
		description="Create all eclipse projects">
	    
		<maven:reactor
			basedir="${basedir}"
		    postProcessing="true"
		    includes="*/project.xml"
		    goals="eclipse"
		    banner="Eclipse Project"
		    ignoreFailures="true"/>
    </goal>
</project>
